#+TITLE:   evil-tex
#+DATE:    February 1, 2020
#+STARTUP: inlineimages nofold

LaTeX text objects for =evil-mode= that work well with =evil-surround=.
Successor of  [[https://github.com/hpdeifel/evil-latex-textobjects][evil-latex-textobjects]]
* Table of Contents :TOC_3:noexport:
- [[#incomplete-showcase][Incomplete Showcase]]
- [[#installation][Installation]]
- [[#complete-info][Complete info]]
  - [[#text-objects][Text Objects]]
  - [[#binding-new-envsaccents-to-the-keymaps][Binding new envs/accents to the keymaps]]
- [[#appendix][Appendix]]
  - [[#environment-keymap][Environment keymap]]
  - [[#cdlatex-accent-keymap][cdlatex accent keymap]]

* Incomplete Showcase
=|= marks point.

=\ti|lde{h}= -> cic /(change inner command)/ -> =\tilde{|}=

=\tilde{h|}= -> cscc bar SPC /(change surrounding command to =bar=)/ -> =\bar{h}=

=\(\sum_{i=1}^{n} i^2|\)= -> cim /(change inner math)/ -> =\(|\)=

=\(\sum_{i=1}^{n} i^2|\)= -> csmM /(change surrounding math to display)/ -> =\[\sum_{i=1}^{n} i^2|\]=

=\[a^2\]= -> csmeA /(change surrounding math to environment =align*=)/ ->
=\begin{align*} a^2 \end{align}=

TODO the right/left delimiters when implemented
* Installation
Until this package's on MELPA, clone it and put it in your load path and hook it
to ~LaTeX-mode-hook~. Sorry ¯\_(ツ)¯\_
* Complete info
** Text Objects
This package defines 6 text objects:
| Key | Abbrevation     | Text Object Target                                         | Surround behavior                          |
|-----+-----------------+------------------------------------------------------------+--------------------------------------------|
| ~c~ | command         | TeX marcos: \foo{...}                                     | Prompts you for a macro                    |
| ~e~ | environmnt      | \begin{...} \end{...} blocks                         | Prompts you with [[#environment-keymap][the env keymap keymap]]     |
| ~m~ | math            | Both inline ~\( \)~ and display ~\[ \]~.                   | Surrounds with ~\( \)~                     |
| ~M~ | Display math    | N/A                                                        | Surrounds with ~\[ \]~                     |
| ~$~ | dollar          | Old TeX inline maths. [[https://tex.stackexchange.com/questions/510/are-and-preferable-to-dollar-signs-for-math-mode][Though you should probably use \(\)]]. | Surrounds with ~$~                         |
| ~d~ | delimiters      | TODO @itay                                           | TODO @itay                                 |
| ~;~ | [[#cdlatex-accent-keymap][CDLaTeX accents]] | N/A                                                        | Prompts you with [[#cdlatex-accent-keymap][the cdlatex accent keymap]] |
#+TBLFM: $3=\begin{}...\end{}= blocks
** Binding new envs/accents to the keymaps
Set ~evil-tex-user-env-map-generator-alist~ or
~evil-tex-user-cdlatex-accents-map-generator-alist~. For example, to add default
position for figures:
#+BEGIN_SRC emacs-lisp
(setq evil-tex-user-env-map-generator-alist
      '(("f" "\\begin{figure}[!ht]" . "\\end{figure}")))
#+END_SRC
To add your own accent to ~evil-tex-user-cdlatex-accents-map-generator-alist~:
#+BEGIN_SRC emacs-lisp
(setq evil-tex-user-cdlatex-accents-map-generator-alist
      '(("b" "mathbb")))
#+END_SRC
Same for ~evil-tex-user-cdlatex-accents-map-generator-alist~. The exact format
is documented under the variable ~evil-tex-user-env-map-generator-alist~

*Make sure to set these variables before evil-TeX is loaded!*
* Appendix
** Environment keymap
Giving a prefix argument would prompt for options.
| Category        | env         | key alias |
|-----------------+-------------+-----------|
| Generic         | prompt user | x         |
|-----------------+-------------+-----------|
| Built In        | equation    | e         |
|                 | equation*   | E         |
|                 | figure      | f         |
|                 | itemize     | i         |
|                 | enumerate   | I         |
| AmsMath         | align       | a         |
|                 | align*      | A         |
|                 | alignat     | n         |
|                 | alignat*    | N         |
|                 | eqnarray    | r         |
|                 | flalign     | l         |
|                 | flalign*    | L         |
|                 | gather      | g         |
|                 | gather*     | G         |
|                 | multline    | m         |
|                 | multline*   | M         |
|                 | cases       | c         |
| Common Theorems | axiom       | ta        |
| prefix t        | corollary   | tc        |
|                 | definition  | td        |
|                 | examples    | te        |
|                 | exercise    | ts        |
|                 | lemma       | tl        |
|                 | proof       | tp        |
|                 | question    | tq        |
|                 | remark      | tr        |
|                 | theorem     | tt        |
** cdlatex accent keymap
See [[https://github.com/cdominik/cdlatex/blob/a5cb624ef/cdlatex.el#L141][cdlatex]]. "style?" implies that the braces come before the macro, e.g
={\displaystyle ...}=
| key | macro             | style? |
|-----+-------------------+--------|
| .   | dot               |        |
| :   | ddot              |        |
| ~   | tilde             |        |
| N   | widetilde         |        |
| ^   | hat               |        |
| H   | widehat           |        |
| -   | bar               |        |
| T   | overline          |        |
| _   | underline         |        |
| {   | overbrace         |        |
| }   | underbrace        |        |
| >   | vec               |        |
| /   | grave             |        |
| \   | acute             |        |
| v   | check             |        |
| u   | breve             |        |
| m   | mbox              |        |
| c   | mathcal           |        |
| r   | mathrm/textrm     |        |
| i   | mathit/textit     |        |
| l   | NONE!!/textsl     |        |
| b   | mathbf/textbf     |        |
| e   | mathem/emph       |        |
| y   | mathtt/texttt     |        |
| f   | mathsf/textsf     |        |
| 0   | textstyle         |        |
| 1   | displaystyle      | yes    |
| 2   | scriptstyle       | yes    |
| 3   | scriptscriptstyle | yes    |
